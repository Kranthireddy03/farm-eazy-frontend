{"version":3,"file":"ForgotPassword-Cf7vy58r.js","sources":["../../src/pages/ForgotPassword.jsx"],"sourcesContent":["/**\r\n * Forgot Password Page Component - Modern FarmEazy Design\r\n * Features elegant glass morphism, animated backgrounds, and farming theme\r\n */\r\n\r\nimport { useState, useEffect } from 'react'\r\nimport { useNavigate, Link } from 'react-router-dom'\r\nimport AuthService from '../services/AuthService'\r\n\r\nfunction ForgotPassword() {\r\n  const navigate = useNavigate()\r\n  const [email, setEmail] = useState('')\r\n  const [errors, setErrors] = useState({})\r\n  const [loading, setLoading] = useState(false)\r\n  const [submitted, setSubmitted] = useState(false)\r\n  const [countdown, setCountdown] = useState(0)\r\n  const [apiError, setApiError] = useState('')\r\n\r\n  useEffect(() => {\r\n    if (countdown <= 0) return\r\n    const timer = setInterval(() => {\r\n      setCountdown(prev => {\r\n        if (prev <= 1) {\r\n          clearInterval(timer)\r\n          return 0\r\n        }\r\n        return prev - 1\r\n      })\r\n    }, 1000)\r\n    return () => clearInterval(timer)\r\n  }, [countdown])\r\n\r\n  const validateForm = () => {\r\n    const newErrors = {}\r\n    if (!email) {\r\n      newErrors.email = 'Email is required'\r\n    } else if (!/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(email)) {\r\n      newErrors.email = 'Please enter a valid email'\r\n    }\r\n    setErrors(newErrors)\r\n    return Object.keys(newErrors).length === 0\r\n  }\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault()\r\n    setApiError('')\r\n    if (!validateForm()) return\r\n\r\n    setLoading(true)\r\n    try {\r\n      await AuthService.forgotPassword(email)\r\n      setSubmitted(true)\r\n      setCountdown(30)\r\n      setTimeout(() => navigate('/login'), 33000)\r\n    } catch (error) {\r\n      if (error.status === 503 || error.message?.includes('email')) {\r\n        navigate('/email-error', {\r\n          state: {\r\n            title: 'Email Delivery Failed',\r\n            message: error.message || 'Unable to send the password reset email.',\r\n            email: email,\r\n            returnPath: '/forgot-password'\r\n          }\r\n        })\r\n      } else {\r\n        setApiError(error.message || 'Failed to process request. Please try again.')\r\n      }\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen relative overflow-hidden flex items-center justify-center px-4 py-8\">\r\n      {/* Animated Background */}\r\n      <div className=\"absolute inset-0 bg-gradient-to-br from-indigo-900 via-purple-800 to-violet-900\">\r\n        <div className=\"absolute inset-0 opacity-30\">\r\n          <div className=\"absolute top-0 -left-4 w-72 h-72 bg-pink-400 rounded-full mix-blend-multiply filter blur-xl animate-pulse\"></div>\r\n          <div className=\"absolute top-0 -right-4 w-72 h-72 bg-indigo-400 rounded-full mix-blend-multiply filter blur-xl animate-pulse\" style={{animationDelay: '2s'}}></div>\r\n          <div className=\"absolute -bottom-8 left-20 w-72 h-72 bg-purple-300 rounded-full mix-blend-multiply filter blur-xl animate-pulse\" style={{animationDelay: '4s'}}></div>\r\n        </div>\r\n        <div className=\"absolute inset-0 opacity-5\" style={{\r\n          backgroundImage: `url(\"data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.4'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E\")`,\r\n        }}></div>\r\n      </div>\r\n\r\n      {/* Floating Elements */}\r\n      <div className=\"absolute inset-0 overflow-hidden pointer-events-none\">\r\n        <div className=\"absolute top-20 left-10 text-6xl opacity-20 animate-bounce\" style={{animationDuration: '3s'}}>üîê</div>\r\n        <div className=\"absolute top-40 right-20 text-5xl opacity-20 animate-bounce\" style={{animationDuration: '4s', animationDelay: '1s'}}>üìß</div>\r\n        <div className=\"absolute bottom-32 left-1/4 text-4xl opacity-20 animate-bounce\" style={{animationDuration: '5s', animationDelay: '2s'}}>üîë</div>\r\n        <div className=\"absolute bottom-20 right-1/3 text-5xl opacity-20 animate-bounce\" style={{animationDuration: '3.5s'}}>üåæ</div>\r\n      </div>\r\n\r\n      {/* Card */}\r\n      <div className=\"relative z-10 w-full max-w-md\">\r\n        <div className=\"backdrop-blur-xl bg-white/10 rounded-3xl shadow-2xl border border-white/20 p-8 transform transition-all duration-500 hover:scale-[1.02]\">\r\n          \r\n          {/* Logo & Header */}\r\n          <div className=\"text-center mb-8\">\r\n            <div className=\"relative inline-block\">\r\n              <div className=\"w-20 h-20 bg-gradient-to-br from-pink-400 to-purple-500 rounded-2xl rotate-3 absolute -top-1 -left-1 opacity-50\"></div>\r\n              <div className=\"w-20 h-20 bg-gradient-to-br from-indigo-400 to-violet-600 rounded-2xl flex items-center justify-center relative shadow-lg\">\r\n                <span className=\"text-4xl\">üîê</span>\r\n              </div>\r\n            </div>\r\n            <h1 className=\"text-3xl font-extrabold text-white mt-6 tracking-tight\">Forgot Password?</h1>\r\n            <p className=\"text-indigo-200 mt-2 text-sm\">No worries! Enter your email to reset it.</p>\r\n          </div>\r\n\r\n          {!submitted ? (\r\n            <form onSubmit={handleSubmit} className=\"space-y-5\">\r\n              {/* Error Display */}\r\n              {apiError && (\r\n                <div className=\"bg-red-500/20 backdrop-blur-sm border border-red-400/30 text-red-100 px-4 py-3 rounded-xl flex items-center gap-3\">\r\n                  <span className=\"text-xl\">‚ö†Ô∏è</span>\r\n                  <p className=\"font-medium\">{apiError}</p>\r\n                </div>\r\n              )}\r\n\r\n              {/* Email Field */}\r\n              <div className=\"space-y-2\">\r\n                <label className=\"text-white/90 text-sm font-semibold flex items-center gap-2\">\r\n                  <span>üìß</span> Email Address\r\n                </label>\r\n                <input\r\n                  type=\"email\"\r\n                  value={email}\r\n                  onChange={(e) => { setEmail(e.target.value); if (errors.email) setErrors({}) }}\r\n                  className=\"w-full px-4 py-3.5 bg-white/10 border border-white/20 rounded-xl text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:border-transparent transition-all duration-300 backdrop-blur-sm\"\r\n                  placeholder=\"farmer@example.com\"\r\n                />\r\n                {errors.email && <p className=\"text-red-300 text-sm flex items-center gap-1\"><span>‚ùå</span> {errors.email}</p>}\r\n              </div>\r\n\r\n              {/* Submit Button */}\r\n              <button\r\n                type=\"submit\"\r\n                disabled={loading}\r\n                className=\"w-full py-4 bg-gradient-to-r from-indigo-500 to-purple-600 hover:from-indigo-600 hover:to-purple-700 text-white font-bold rounded-xl shadow-lg shadow-indigo-500/30 transform transition-all duration-300 hover:scale-[1.02] hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none flex items-center justify-center gap-2\"\r\n              >\r\n                {loading ? (\r\n                  <>\r\n                    <svg className=\"animate-spin h-5 w-5\" viewBox=\"0 0 24 24\">\r\n                      <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\" fill=\"none\" />\r\n                      <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\" />\r\n                    </svg>\r\n                    Sending...\r\n                  </>\r\n                ) : (\r\n                  <>\r\n                    <span>üì§</span> Send Reset Link\r\n                  </>\r\n                )}\r\n              </button>\r\n            </form>\r\n          ) : (\r\n            /* Success State */\r\n            <div className=\"text-center py-4\">\r\n              <div className=\"w-20 h-20 bg-gradient-to-br from-emerald-400 to-green-600 rounded-full flex items-center justify-center mx-auto mb-6 animate-bounce\">\r\n                <span className=\"text-4xl\">‚úÖ</span>\r\n              </div>\r\n              <h2 className=\"text-2xl font-bold text-white mb-3\">Check Your Email!</h2>\r\n              <p className=\"text-indigo-200 mb-6\">\r\n                We've sent a password reset link to <span className=\"text-white font-semibold\">{email}</span>\r\n              </p>\r\n              <div className=\"bg-white/10 rounded-xl p-4 border border-white/20\">\r\n                <p className=\"text-white/70 text-sm\">\r\n                  Redirecting to login in{' '}\r\n                  <span className=\"text-yellow-400 font-bold text-lg\">{countdown}</span>{' '}\r\n                  seconds...\r\n                </p>\r\n              </div>\r\n              <button\r\n                onClick={() => navigate('/login')}\r\n                className=\"mt-4 text-indigo-300 hover:text-white transition-colors text-sm font-medium\"\r\n              >\r\n                Go to login now ‚Üí\r\n              </button>\r\n            </div>\r\n          )}\r\n\r\n          {/* Divider */}\r\n          <div className=\"flex items-center gap-4 my-6\">\r\n            <div className=\"flex-1 h-px bg-white/20\"></div>\r\n            <span className=\"text-white/40 text-sm\">or</span>\r\n            <div className=\"flex-1 h-px bg-white/20\"></div>\r\n          </div>\r\n\r\n          {/* Back to Login */}\r\n          <div className=\"text-center\">\r\n            <p className=\"text-white/70\">\r\n              Remember your password?{' '}\r\n              <Link to=\"/login\" className=\"text-yellow-400 hover:text-yellow-300 font-bold transition-colors\">\r\n                Login here üîë\r\n              </Link>\r\n            </p>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Bottom Decoration */}\r\n        <div className=\"text-center mt-6 text-white/40 text-sm\">\r\n          <p>üåæ We're here to help üåæ</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ForgotPassword\r\n"],"names":["ForgotPassword","navigate","useNavigate","email","setEmail","useState","errors","setErrors","loading","setLoading","submitted","setSubmitted","countdown","setCountdown","apiError","setApiError","useEffect","timer","prev","validateForm","newErrors","handleSubmit","e","AuthService","error","jsxs","jsx","Fragment","Link"],"mappings":"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"}