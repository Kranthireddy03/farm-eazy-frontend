import{i as R,r as l,g as W,j as e,T as P,L as _,h,k as u}from"./index-CfUSoOK0.js";function B(){const g=window,p=()=>{g.fetchStats&&g.fetchStats()},{toast:f,showToast:i,closeToast:S}=R(),[y,F]=l.useState([]),[C,b]=l.useState(!0),[d,o]=l.useState(!1),[v,t]=l.useState(""),[N,j]=l.useState(!1),[w,m]=l.useState(null),[s,c]=l.useState({farmName:"",location:"",areaSize:""}),{show:z,hide:A}=W();l.useEffect(()=>{(async()=>{try{z(),await x()}finally{A()}})()},[]);const x=async()=>{try{b(!0);const a=await h.get(u.GET_FARMS);F(a.data),t("")}catch(a){t("Failed to load farms"),console.error(a)}finally{b(!1)}},n=a=>{const{name:r,value:M}=a.target;c(q=>({...q,[r]:M}))},E=async a=>{if(a.preventDefault(),!s.farmName||!s.location||!s.areaSize){t("Please fill in all fields");return}o(!0);try{await h.post(u.CREATE_FARM,{...s,areaSize:parseFloat(s.areaSize)}),c({farmName:"",location:"",areaSize:""}),j(!1),t(""),i("Farm created successfully!","success"),await x(),p()}catch(r){t(r.message||"Failed to create farm"),i(r.message||"Failed to create farm","error")}finally{o(!1)}},k=async a=>{if(window.confirm("Are you sure you want to delete this farm?"))try{await h.delete(u.DELETE_FARM(a)),t(""),i("Farm deleted successfully!","success"),await x(),p()}catch{t("Failed to delete farm"),i("Failed to delete farm","error")}},L=a=>{m(a),c({farmName:a.farmName,location:a.location,areaSize:a.areaSize.toString()}),j(!1)},D=async a=>{if(a.preventDefault(),!s.farmName||!s.location||!s.areaSize){t("Please fill in all fields");return}o(!0);try{await h.put(u.UPDATE_FARM(w.id),{...s,areaSize:parseFloat(s.areaSize)}),c({farmName:"",location:"",areaSize:""}),m(null),t(""),i("Farm updated successfully!","success"),await x(),p()}catch(r){t(r.message||"Failed to update farm"),i(r.message||"Failed to update farm","error")}finally{o(!1)}},T=()=>{m(null),c({farmName:"",location:"",areaSize:""})};return C?e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"spinner text-green-600 mb-4",children:e.jsx("svg",{className:"w-12 h-12",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z"})})}),e.jsx("p",{className:"text-gray-600",children:"Loading farms..."})]})}):e.jsxs(e.Fragment,{children:[f&&e.jsx(P,{message:f.message,type:f.type,onClose:S}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Farms"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage all your farms in one place"})]}),e.jsx("button",{onClick:()=>{j(!N),m(null),c({farmName:"",location:"",areaSize:""})},className:"btn-primary",children:N?"Cancel":"+ Add Farm"})]}),v&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:v}),N&&e.jsxs("div",{className:"card",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Add New Farm"}),e.jsxs("form",{onSubmit:E,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"form-label",children:["Farm Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"farmName",value:s.farmName,onChange:n,className:"form-input",placeholder:"e.g., North Field",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"form-label",children:["Location ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"location",value:s.location,onChange:n,className:"form-input",placeholder:"e.g., District, State",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"form-label",children:["Area Size (hectares) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",name:"areaSize",value:s.areaSize,onChange:n,className:"form-input",placeholder:"e.g., 5.5",step:"0.1",required:!0})]})]}),e.jsx("button",{type:"submit",disabled:d,className:"btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:d?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating..."]}):"Create Farm"})]})]}),w&&e.jsxs("div",{className:"card",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Edit Farm"}),e.jsxs("form",{onSubmit:D,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"form-label",children:["Farm Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"farmName",value:s.farmName,onChange:n,className:"form-input",placeholder:"e.g., North Field",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"form-label",children:["Location ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"location",value:s.location,onChange:n,className:"form-input",placeholder:"e.g., District, State",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"form-label",children:["Area Size (hectares) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",name:"areaSize",value:s.areaSize,onChange:n,className:"form-input",placeholder:"e.g., 5.5",step:"0.1",required:!0})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{type:"submit",disabled:d,className:"btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:d?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Updating..."]}):"Update Farm"}),e.jsx("button",{type:"button",onClick:T,className:"btn-secondary",children:"Cancel"})]})]})]}),y.length===0?e.jsx("div",{className:"card text-center py-12",children:e.jsx("p",{className:"text-gray-600 text-lg",children:"No farms yet. Create your first farm to get started!"})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:y.map(a=>e.jsxs("div",{className:"card hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:a.farmName}),e.jsx("p",{className:"text-gray-600 text-sm",children:a.location})]}),e.jsx("span",{className:"text-2xl",children:"ðŸŒ¾"})]}),e.jsx("div",{className:"space-y-2 mb-4 pb-4 border-b border-gray-200",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Area Size"}),e.jsxs("p",{className:"font-semibold text-gray-800",children:[a.areaSize," hectares"]})]})}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>L(a),className:"flex-1 btn-primary text-center text-sm",children:"Edit"}),e.jsx(_,{to:`/farms/${a.id}`,className:"flex-1 btn-secondary text-center text-sm",children:"View"}),e.jsx("button",{onClick:()=>k(a.id),className:"flex-1 btn-secondary text-sm",children:"Delete"})]})]},a.id))})]})]})}export{B as default};
//# sourceMappingURL=Farms-DtxZEbG1.js.map
