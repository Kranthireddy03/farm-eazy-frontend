import{u as p,r,j as e,h as g}from"./index-BSllqeVN.js";function j(){const l=window,o=()=>{l.fetchStats&&l.fetchStats()},n=p(),[i,x]=r.useState([]),[h,m]=r.useState(!0),[d,u]=r.useState(null);r.useEffect(()=>{(async()=>{try{const s=await g.get("/orders"),a=Array.isArray(s.data)?s.data:[];x(a)}catch{u("Could not load orders")}finally{m(!1),o()}})()},[]);const c=t=>`â‚¹${Number(t||0).toFixed(2)}`;return h?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-900 to-slate-800",children:e.jsx("p",{className:"text-slate-300 text-lg",children:"Loading your orders..."})}):d?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-900 to-slate-800",children:e.jsxs("div",{className:"bg-slate-800 rounded-lg shadow-lg p-8 text-center border border-slate-700",children:[e.jsx("p",{className:"text-red-400 mb-4",children:d}),e.jsx("button",{onClick:()=>n("/buying"),className:"bg-orange-500 hover:bg-orange-600 text-white font-bold py-3 px-8 rounded-lg transition",children:"Back to shop"})]})}):i.length===0?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 to-slate-800 py-8 px-4",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs("div",{className:"bg-slate-800 rounded-lg shadow-lg p-8 text-center border border-slate-700",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸ“¦"}),e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"My Orders"}),e.jsx("p",{className:"text-slate-400 mb-6",children:"Your order history will appear here."}),e.jsx("button",{onClick:()=>n("/buying"),className:"bg-orange-500 hover:bg-orange-600 text-white font-bold py-3 px-8 rounded-lg transition",children:"Start Shopping"})]})})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 to-slate-800 py-8 px-4",children:e.jsxs("div",{className:"max-w-5xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-400",children:"Order history"}),e.jsx("h1",{className:"text-3xl font-bold text-white",children:"My Orders"})]}),e.jsx("button",{onClick:()=>n("/buying"),className:"bg-orange-500 hover:bg-orange-600 text-white font-bold py-2 px-4 rounded-lg transition",children:"Continue shopping"})]}),e.jsx("div",{className:"space-y-4",children:i.map(t=>e.jsxs("div",{className:"bg-slate-800 rounded-lg shadow-lg p-6 border border-slate-700",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-400",children:"Order ID"}),e.jsxs("p",{className:"text-lg font-semibold text-white",children:["#FZ",t.id]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-400",children:"Placed on"}),e.jsx("p",{className:"text-lg font-semibold text-white",children:t.createdAt?.split("T")[0]||"â€”"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-400",children:"Total"}),e.jsx("p",{className:"text-lg font-semibold text-orange-400",children:c(t.finalAmount)})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"px-3 py-1 rounded-full text-sm font-semibold bg-blue-900/50 text-blue-400",children:t.orderStatus||"PENDING"}),e.jsxs("div",{className:"text-xs text-slate-400 mt-1",children:["Payment: ",t.paymentStatus]})]})]}),t.items&&t.items.length>0&&e.jsxs("div",{className:"mt-4 border-t border-slate-600 pt-4 text-sm text-slate-300",children:[t.items.map(s=>e.jsxs("div",{className:"flex justify-between py-1 items-center",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-white",children:s.productName})," Ã— ",s.quantity,s.discountedPrice!==void 0&&s.discountedPrice<s.price?e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"ml-2 text-orange-400 font-bold",children:["â‚¹",s.discountedPrice.toFixed(2)]}),e.jsxs("span",{className:"ml-2 line-through text-slate-500",children:["â‚¹",s.price.toFixed(2)]}),e.jsxs("span",{className:"ml-2 text-green-400 font-semibold",children:["Saved â‚¹",((s.price-s.discountedPrice)*s.quantity).toFixed(2)]})]}):e.jsxs("span",{className:"ml-2 text-orange-400 font-bold",children:["â‚¹",s.price.toFixed(2)]})]}),e.jsx("span",{className:"text-white",children:c(s.totalPrice)})]},`${t.id}-${s.productId}`)),t.items.some(s=>s.discountedPrice!==void 0&&s.discountedPrice<s.price)&&e.jsx("div",{className:"flex justify-end text-green-400 font-semibold mt-2",children:e.jsxs("span",{children:["Total Discount Savings: â‚¹",t.items.reduce((s,a)=>a.discountedPrice!==void 0&&a.discountedPrice<a.price?s+(a.price-a.discountedPrice)*a.quantity:s,0).toFixed(2)]})})]})]},t.id))})]})})}export{j as default};
//# sourceMappingURL=Orders-Caagp6Xh.js.map
