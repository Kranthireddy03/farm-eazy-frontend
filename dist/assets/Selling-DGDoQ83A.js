import{h as C,u as D,i as M,r as i,j as e,R as V}from"./index-D_IIqowu.js";import{f as R}from"./formatDate-BHbnFLzm.js";import{P as S}from"./ProductService-CdxgsRtK.js";const O={sendOtp:async(u,a)=>(await C.post("/otp/send",{email:u,purpose:a})).data,verifyOtp:async(u,a,o)=>(await C.post("/otp/verify",{email:u,otpCode:a,purpose:o})).data};function _(){const u=D(),{showToast:a}=M(),[o,n]=i.useState(1),[I,f]=i.useState(!1),[T,j]=i.useState(!1),[b,y]=i.useState(["","","","","",""]),[c,N]=i.useState(0),[x,m]=i.useState(!1),[v,E]=i.useState([]),[F,h]=i.useState(!1),p=localStorage.getItem("farmEazy_email")||"",[s,g]=i.useState({productName:"",category:"",description:"",price:"",discountPercentage:0,quantity:"",unit:"",weight:"",specifications:"",warrantyInfo:"",imageUrls:"",videoUrls:"",contactEmail:"",contactPhone:""}),L=[{value:"seeds",label:"ðŸŒ± Seeds",color:"from-green-400 to-green-600"},{value:"fertilizers",label:"ðŸŒ¿ Fertilizers",color:"from-emerald-400 to-emerald-600"},{value:"pesticides",label:"ðŸ›¡ï¸ Pesticides",color:"from-teal-400 to-teal-600"},{value:"tools",label:"ðŸ”§ Tools",color:"from-blue-400 to-blue-600"},{value:"machinery",label:"ðŸšœ Machinery",color:"from-indigo-400 to-indigo-600"},{value:"irrigation",label:"ðŸ’§ Irrigation",color:"from-cyan-400 to-cyan-600"},{value:"produce",label:"ðŸ¥• Fresh Produce",color:"from-orange-400 to-orange-600"},{value:"others",label:"ðŸ“¦ Others",color:"from-gray-400 to-gray-600"}];i.useEffect(()=>{w()},[]),i.useEffect(()=>{if(c>0){const t=setInterval(()=>N(c-1),1e3);return()=>clearInterval(t)}},[c]);const w=async()=>{try{const t=await S.getMyProducts();E(t)}catch(t){console.error("Error fetching products:",t)}},P=async()=>{m(!0);try{await O.sendOtp(p,"SELLING"),j(!0),N(600),a("OTP sent to your email","success")}catch(t){a(t.response?.data?.message||"Failed to send OTP","error")}finally{m(!1)}},q=(t,l)=>{if(l.length<=1&&/^\d*$/.test(l)){const d=[...b];d[t]=l,y(d),l&&t<5&&document.getElementById(`otp-${t+1}`).focus()}},U=async()=>{const t=b.join("");if(t.length!==6){a("Please enter complete OTP","error");return}m(!0);try{await O.verifyOtp(p,t,"SELLING"),f(!0),n(2),a("OTP verified successfully!","success")}catch(l){a(l.response?.data?.message||"Invalid OTP","error")}finally{m(!1)}},r=t=>{const{name:l,value:d}=t.target;if(l==="contactEmail"&&d&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(d)){a("Please enter a valid email address","error");return}g(k=>({...k,[l]:d}))},B=async t=>{if(t.preventDefault(),!I){a("Please verify OTP first","error");return}if(!s.quantity||parseInt(s.quantity,10)<=0){a("Quantity must be greater than zero","error");return}m(!0);try{await S.createProduct(s),a("Product listed successfully!","success"),h(!1),n(1),f(!1),j(!1),y(["","","","","",""]),g({productName:"",category:"",description:"",price:"",discountPercentage:0,quantity:"",unit:"",weight:"",specifications:"",warrantyInfo:"",imageUrls:"",videoUrls:"",contactEmail:"",contactPhone:""}),w()}catch(l){a(l.response?.data?.message||"Failed to create product","error")}finally{m(!1)}},$=s.price&&s.discountPercentage>0?(s.price-s.price*s.discountPercentage/100).toFixed(2):s.price;return F?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 to-slate-800 py-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4",children:[e.jsxs("div",{className:"bg-slate-800 border border-slate-700 rounded-2xl shadow-lg p-6 mb-6",children:[e.jsx("button",{onClick:()=>h(!1),className:"text-blue-400 hover:text-blue-300 flex items-center gap-2 font-medium transition-colors mb-4",children:"â† Back to Products"}),e.jsx("h1",{className:"text-3xl font-bold text-white",children:"List New Product"})]}),e.jsx("div",{className:"bg-slate-800 border border-slate-700 rounded-2xl shadow-lg p-6 mb-6",children:e.jsx("div",{className:"flex items-center justify-between",children:[1,2,3,4,5,6].map(t=>e.jsxs(V.Fragment,{children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold transition-all ${o>=t?"bg-gradient-to-r from-blue-500 to-indigo-600 text-white shadow-lg":"bg-slate-700 text-slate-400"}`,children:o>t?"âœ“":t}),e.jsxs("span",{className:"text-xs mt-1 text-slate-400 hidden sm:block",children:[t===1&&"OTP",t===2&&"Basic",t===3&&"Pricing",t===4&&"Stock",t===5&&"Details",t===6&&"Media"]})]}),t<6&&e.jsx("div",{className:`flex-1 h-1 mx-2 rounded transition-all ${o>t?"bg-gradient-to-r from-blue-500 to-indigo-600":"bg-slate-700"}`})]},t))})}),e.jsxs("form",{onSubmit:B,children:[o===1&&e.jsxs("div",{className:"bg-slate-800 border border-slate-700 rounded-2xl shadow-lg p-8 animate-fadeIn",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4 text-white flex items-center gap-2",children:"ðŸ” Verify Your Email"}),e.jsxs("p",{className:"text-slate-300 mb-6",children:["Enter the 6-digit OTP sent to ",p]}),T?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex gap-3 justify-center mb-6",children:b.map((t,l)=>e.jsx("input",{id:`otp-${l}`,type:"text",maxLength:"1",value:t,onChange:d=>q(l,d.target.value),className:"w-14 h-14 text-center text-2xl font-bold bg-slate-700 border-2 border-slate-600 text-white rounded-xl focus:border-blue-500 focus:outline-none transition-all"},l))}),c>0&&e.jsxs("p",{className:"text-center text-slate-300 mb-4",children:["Time remaining: ",e.jsxs("span",{className:"font-bold text-blue-400",children:[Math.floor(c/60),":",(c%60).toString().padStart(2,"0")]})]}),e.jsx("button",{type:"button",onClick:U,disabled:x||b.join("").length!==6,className:"w-full bg-gradient-to-r from-green-500 to-emerald-600 text-white py-4 rounded-xl font-semibold hover:shadow-lg transition-all disabled:opacity-50 mb-3",children:x?"Verifying...":"Verify OTP"}),e.jsx("button",{type:"button",onClick:P,disabled:x||c>0,className:"w-full text-blue-400 py-2 font-medium hover:underline disabled:opacity-50",children:"Resend OTP"})]}):e.jsx("button",{type:"button",onClick:P,disabled:x,className:"w-full bg-gradient-to-r from-blue-500 to-indigo-600 text-white py-4 rounded-xl font-semibold hover:shadow-lg transition-all disabled:opacity-50",children:x?"Sending...":"Send OTP"})]}),o===2&&e.jsxs("div",{className:"bg-slate-800 border border-slate-700 rounded-2xl shadow-lg p-8 animate-fadeIn",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6 text-white",children:"ðŸ“ Basic Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"Product Name *"}),e.jsx("input",{type:"text",name:"productName",value:s.productName,onChange:r,required:!0,className:"w-full px-4 py-3 bg-slate-700 border-2 border-slate-600 text-white placeholder-slate-400 rounded-xl focus:border-blue-500 focus:outline-none transition-all",placeholder:"e.g., Organic Tomato Seeds"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-300 mb-3",children:"Category *"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:L.map(t=>e.jsx("button",{type:"button",onClick:()=>g(l=>({...l,category:t.value})),className:`p-4 rounded-xl font-semibold text-sm transition-all ${s.category===t.value?`bg-gradient-to-r ${t.color} text-white shadow-lg scale-105`:"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:t.label},t.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"Description"}),e.jsx("textarea",{name:"description",value:s.description,onChange:r,rows:"4",className:"w-full px-4 py-3 bg-slate-700 border-2 border-slate-600 text-white placeholder-slate-400 rounded-xl focus:border-blue-500 focus:outline-none transition-all",placeholder:"Describe your product..."}),e.jsxs("p",{className:"text-sm text-slate-500 mt-1",children:[s.description.length," characters"]})]})]}),e.jsx("button",{type:"button",onClick:()=>n(3),disabled:!s.productName||!s.category,className:"w-full mt-6 bg-gradient-to-r from-blue-500 to-indigo-600 text-white py-4 rounded-xl font-semibold hover:shadow-lg transition-all disabled:opacity-50",children:"Next: Pricing â†’"})]}),o===3&&e.jsxs("div",{className:"bg-slate-800 border border-slate-700 rounded-2xl shadow-lg p-8 animate-fadeIn",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6 text-white",children:"ðŸ’° Pricing"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"Price (â‚¹) *"}),e.jsx("input",{type:"number",name:"price",value:s.price,onChange:r,required:!0,step:"0.01",className:"w-full px-4 py-3 bg-slate-700 border-2 border-slate-600 text-white placeholder-slate-400 rounded-xl focus:border-blue-500 focus:outline-none transition-all",placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:["Discount: ",s.discountPercentage,"%"]}),e.jsx("input",{type:"range",name:"discountPercentage",value:s.discountPercentage,onChange:r,min:"0",max:"50",className:"w-full h-3 bg-gradient-to-r from-blue-200 to-indigo-400 rounded-lg appearance-none cursor-pointer"}),e.jsxs("div",{className:"flex justify-between text-xs text-slate-500 mt-1",children:[e.jsx("span",{children:"0%"}),e.jsx("span",{children:"25%"}),e.jsx("span",{children:"50%"})]})]}),s.price&&e.jsxs("div",{className:"bg-green-900/30 p-6 rounded-xl border-2 border-green-700",children:[e.jsx("h3",{className:"font-semibold text-slate-300 mb-2",children:"Price Preview"}),e.jsxs("div",{className:"flex items-center gap-4",children:[s.discountPercentage>0&&e.jsxs("span",{className:"text-2xl text-slate-500 line-through",children:["â‚¹",s.price]}),e.jsxs("span",{className:"text-3xl font-bold text-green-400",children:["â‚¹",$]}),s.discountPercentage>0&&e.jsxs("span",{className:"bg-red-500 text-white px-3 py-1 rounded-full text-sm font-bold",children:[s.discountPercentage,"% OFF"]})]})]})]}),e.jsxs("div",{className:"flex gap-4 mt-6",children:[e.jsx("button",{type:"button",onClick:()=>n(2),className:"flex-1 border-2 border-slate-600 text-slate-300 py-4 rounded-xl font-semibold hover:bg-slate-700 transition-all",children:"â† Back"}),e.jsx("button",{type:"button",onClick:()=>n(4),disabled:!s.price,className:"flex-1 bg-gradient-to-r from-blue-500 to-indigo-600 text-white py-4 rounded-xl font-semibold hover:shadow-lg transition-all disabled:opacity-50",children:"Next: Stock â†’"})]})]}),o===4&&e.jsxs("div",{className:"bg-slate-800 border border-slate-700 rounded-2xl shadow-lg p-8 animate-fadeIn",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6 text-white",children:"ðŸ“¦ Inventory"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"Quantity *"}),e.jsx("input",{type:"number",name:"quantity",value:s.quantity,onChange:r,required:!0,min:"1",className:"w-full px-4 py-3 bg-slate-700 border-2 border-slate-600 text-white placeholder-slate-400 rounded-xl focus:border-blue-500 focus:outline-none transition-all",placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"Unit *"}),e.jsxs("select",{name:"unit",value:s.unit,onChange:r,required:!0,className:"w-full px-4 py-3 bg-slate-700 border-2 border-slate-600 text-white rounded-xl focus:border-blue-500 focus:outline-none transition-all",children:[e.jsx("option",{value:"",children:"Select..."}),e.jsx("option",{value:"kg",children:"Kilogram (kg)"}),e.jsx("option",{value:"g",children:"Gram (g)"}),e.jsx("option",{value:"l",children:"Liter (l)"}),e.jsx("option",{value:"ml",children:"Milliliter (ml)"}),e.jsx("option",{value:"piece",children:"Piece"}),e.jsx("option",{value:"pack",children:"Pack"}),e.jsx("option",{value:"bag",children:"Bag"}),e.jsx("option",{value:"box",children:"Box"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"Weight/Size (optional)"}),e.jsx("input",{type:"text",name:"weight",value:s.weight,onChange:r,className:"w-full px-4 py-3 bg-slate-700 border-2 border-slate-600 text-white placeholder-slate-400 rounded-xl focus:border-blue-500 focus:outline-none transition-all",placeholder:"e.g., 1kg, 500g, 2L"})]})]}),e.jsxs("div",{className:"flex gap-4 mt-6",children:[e.jsx("button",{type:"button",onClick:()=>n(3),className:"flex-1 border-2 border-slate-600 text-slate-300 py-4 rounded-xl font-semibold hover:bg-slate-700 transition-all",children:"â† Back"}),e.jsx("button",{type:"button",onClick:()=>n(5),disabled:!s.quantity||!s.unit,className:"flex-1 bg-gradient-to-r from-blue-500 to-indigo-600 text-white py-4 rounded-xl font-semibold hover:shadow-lg transition-all disabled:opacity-50",children:"Next: Details â†’"})]})]}),o===5&&e.jsxs("div",{className:"bg-slate-800 border border-slate-700 rounded-2xl shadow-lg p-8 animate-fadeIn",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6 text-white",children:"ðŸ“‹ Additional Details"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"Specifications"}),e.jsx("textarea",{name:"specifications",value:s.specifications,onChange:r,rows:"3",className:"w-full px-4 py-3 bg-slate-700 border-2 border-slate-600 text-white placeholder-slate-400 rounded-xl focus:border-blue-500 focus:outline-none transition-all",placeholder:"Technical specifications, ingredients, etc."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"Warranty Information"}),e.jsx("input",{type:"text",name:"warrantyInfo",value:s.warrantyInfo,onChange:r,className:"w-full px-4 py-3 bg-slate-700 border-2 border-slate-600 text-white placeholder-slate-400 rounded-xl focus:border-blue-500 focus:outline-none transition-all",placeholder:"e.g., 1 year manufacturer warranty"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"Contact Email *"}),e.jsx("input",{type:"email",name:"contactEmail",value:s.contactEmail,onChange:r,required:!0,pattern:"^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$",className:"w-full px-4 py-3 bg-slate-700 border-2 border-slate-600 text-white placeholder-slate-400 rounded-xl focus:border-blue-500 focus:outline-none transition-all",placeholder:"your@email.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"Contact Phone *"}),e.jsx("input",{type:"text",name:"contactPhone",value:s.contactPhone,onChange:r,required:!0,pattern:"^[0-9]{10}$",className:"w-full px-4 py-3 bg-slate-700 border-2 border-slate-600 text-white placeholder-slate-400 rounded-xl focus:border-blue-500 focus:outline-none transition-all",placeholder:"10-digit phone number"})]})]}),e.jsxs("div",{className:"flex gap-4 mt-6",children:[e.jsx("button",{type:"button",onClick:()=>n(4),className:"flex-1 border-2 border-slate-600 text-slate-300 py-4 rounded-xl font-semibold hover:bg-slate-700 transition-all",children:"â† Back"}),e.jsx("button",{type:"button",onClick:()=>n(6),className:"flex-1 bg-gradient-to-r from-blue-500 to-indigo-600 text-white py-4 rounded-xl font-semibold hover:shadow-lg transition-all",children:"Next: Media â†’"})]})]}),o===6&&e.jsxs("div",{className:"bg-slate-800 border border-slate-700 rounded-2xl shadow-lg p-8 animate-fadeIn",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6 text-white",children:"ðŸ“¸ Media"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"Image URLs (comma-separated)"}),e.jsx("textarea",{name:"imageUrls",value:s.imageUrls,onChange:r,rows:"3",className:"w-full px-4 py-3 bg-slate-700 border-2 border-slate-600 text-white placeholder-slate-400 rounded-xl focus:border-blue-500 focus:outline-none transition-all",placeholder:"https://example.com/image1.jpg, https://example.com/image2.jpg"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Separate multiple URLs with commas"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"Video URLs (comma-separated)"}),e.jsx("textarea",{name:"videoUrls",value:s.videoUrls,onChange:r,rows:"2",className:"w-full px-4 py-3 bg-slate-700 border-2 border-slate-600 text-white placeholder-slate-400 rounded-xl focus:border-blue-500 focus:outline-none transition-all",placeholder:"https://youtube.com/watch?v=..."})]})]}),e.jsxs("div",{className:"flex gap-4 mt-6",children:[e.jsx("button",{type:"button",onClick:()=>n(5),className:"flex-1 border-2 border-slate-600 text-slate-300 py-4 rounded-xl font-semibold hover:bg-slate-700 transition-all",children:"â† Back"}),e.jsx("button",{type:"submit",disabled:x,className:"flex-1 bg-gradient-to-r from-green-500 to-emerald-600 text-white py-4 rounded-xl font-semibold hover:shadow-lg transition-all disabled:opacity-50 flex items-center justify-center gap-2",children:x?"Publishing...":"âœ¨ Publish Product"})]})]})]})]})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 to-slate-800",children:[e.jsx("div",{className:"bg-slate-800 border-b border-slate-700 shadow-md",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6 flex items-center justify-between",children:[e.jsx("button",{onClick:()=>u("/"),className:"text-blue-400 hover:text-blue-300 flex items-center gap-2 font-medium transition-colors",children:"â† Back to Home"}),e.jsx("button",{onClick:()=>h(!0),className:"bg-gradient-to-r from-blue-500 to-indigo-600 text-white px-6 py-3 rounded-xl font-semibold hover:shadow-lg transition-all flex items-center gap-2",children:"âž• List New Product"})]})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6 text-white",children:"My Products"}),v.length===0?e.jsxs("div",{className:"bg-slate-800 border border-slate-700 rounded-2xl p-12 text-center shadow-lg",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸ“¦"}),e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"No products yet"}),e.jsx("p",{className:"text-slate-400 mb-6",children:"Start listing your products to reach buyers"}),e.jsx("button",{onClick:()=>h(!0),className:"bg-gradient-to-r from-blue-500 to-indigo-600 text-white px-8 py-4 rounded-xl font-semibold hover:shadow-lg transition-all",children:"List Your First Product"})]}):e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:v.map(t=>e.jsxs("div",{className:"bg-slate-800 border border-slate-700 rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-shadow",children:[e.jsx("div",{className:"h-48 bg-gradient-to-r from-slate-700 to-slate-600 flex items-center justify-center",children:e.jsx("span",{className:"text-6xl",children:"ðŸ“¦"})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:t.productName}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${t.status==="ACTIVE"?"bg-green-900/50 text-green-400":t.status==="OUT_OF_STOCK"?"bg-red-900/50 text-red-400":"bg-slate-700 text-slate-400"}`,children:t.status})]}),e.jsx("p",{className:"text-sm text-slate-400 mb-4 capitalize",children:t.category}),e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.discountPercentage>0&&e.jsxs("span",{className:"text-lg text-slate-500 line-through",children:["â‚¹",t.price]}),e.jsxs("span",{className:"text-2xl font-bold text-green-400",children:["â‚¹",t.discountedPrice]}),t.discountPercentage>0&&e.jsxs("span",{className:"bg-red-500 text-white px-2 py-1 rounded-full text-xs font-bold",children:[t.discountPercentage,"% OFF"]})]}),e.jsxs("p",{className:"text-sm text-slate-400 mb-4",children:["Stock: ",e.jsxs("span",{className:"font-semibold text-slate-300",children:[t.quantity," ",t.unit]})]}),e.jsxs("div",{className:"text-xs text-slate-500",children:["Listed ",R(t.createdAt)]})]})]},t.id))})]})]})}export{_ as default};
//# sourceMappingURL=Selling-DGDoQ83A.js.map
